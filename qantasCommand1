import requests

cookies = {
    'JSESSION_QFAward': 'a2GqBU1IgxnDqTFse5vI-WWbz1qvetsqcmxkCaCguNMJ3nL8u4NW!-181333078!578706278',
    'bm_sv': '41D4E33C333F79CB18222F8C46A44EA7~A0haQbC1F2YqwM/sARAN4laFIs2XzYhY/COHnkUHYAbQhxXAKkbw5SorB4o28cpuooJGhigtk0ADhUGP5NR4JQr/rdceGjtNyTbzzh3mQbNzCQ6x8/5vQ3WX4Adp5pQhxqlrRqu/19ZIYAmVxVBTl5rskE2c7s4O6orw EeDfo8=',
    'DWM_XSITECODE': 'QFQFQFBD',
    'aam_uuid': '39250324488771525001773651386199258539',
    'AAMC_qantas_0': 'REGION|9|AMSYNCSOP||AMSYNCS|',
    'LPSID-71115517': 'iEW0e3I0R06dYaPPxRrCpw',
    'LPVID': 'U5NjhkYmQzYjRkZTM1YjEx',
    'check': 'true',
    'mbox': 'PC#8db069a46d034b0b992d0dfa8001c90e.17_24#1595105636|session#dc7e1a195dca4f15ba587413017a2759#1531863297',
    'AMCV_11B20CF953F3626B0A490D44@AdobeOrg': '-330454231|MCMID|39002923232474085011784935677790861354|MCIDTS|17730|MCAAMLH-1532466235|9|MCAAMB-1532466235|j8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI|MCCIDH|-1015965833|MCOPTOUT-1531868034s|NONE|MCSYNCSOP|411-17737|vVersion|3.1.2',
    's_sess': 's_cc=true',
    'QF_VALUE': '094138235183230130140180093240048011073247104215',
    '_sdsat_uuid': '39250324488771525001773651386199258539',
    'timetoBook': 'Tue Jul 17 2018 14:03:55 GMT-0700 (PDT)',
    'usercontext': 'locale#en|tvlDates#201808020000|country#US|tvldate#20180802|region#AM|dep#PVG|arr#SFO',
    'ak_bmsc': '87BFCE97CDCCFE41771FC1CEBA1B366E3FE93D051D5100000B574E5BB189E65C~plVwFVyzY0P2 a CoyQQF6rB7SG9A/6W8Z5yf/z HbxSmkOGIGHOlInjtRx/rqgFq8zBq8FP1o rhSMBcRPdNMUs12UszcT5P/QmElre GEcZV7FNmlo Siq 75Jx45vKrycXsG3WitYSu51oCSOjOtxIsm/mHViqnwv/HGxHy1JIauwn5lG4Ml8PhQv95uAzrAf5YoaqdLnosNrzq3RhPdqzBqk nNoOsJccnZNALh3JTgcwl Nw8kRFGbXyb9T8d',
    'bm_mi': '62A3EB5D347FAC0049E76B8C9B04EFEA~zwTuETWu6yvaM6HcjDHvtJUKVZXofhwhQKV/FZbKs9bkZLy6SCsB9Y474DsMBzzZWR6xQzZ3Yx2wjr 41mWRsgPHQBnRlKzGd2UMipFo8jHdK/gI9AHTuCCmLO8sXIHSt0tOaGB Q1AmNy927FtvnyMwN2VWXp8i1nUzemP1u0r42dJlaYIdhnAhH4JAQ/ipi q7FIVH/LmUBupUjbCvfhqeDLvinTphs02EPk36aUdaB1xaG7cO2jswhngwRlEK1EMj5TcDIrT8HVzoeeNyXHE5Rxen7EJDrzl/A5zy1e7LYkd 20u9Xv/QCX6LflaLqvthwHDJPcnn62rZGEwEkA==',
    'JSESSION_QFBOOKING': '_UWqBAObIqMIK8CQrj0jUJ3EzAorFTALhIM0oLKwLnZHdLwhSssw!-37611050!-2100102979',
    '_eAlgS': 'true',
    '_wt.mode-676736': 'WT3PVZU041xU6Y~',
    '_hjIncludedInSample': '1',
    'AMCVS_11B20CF953F3626B0A490D44@AdobeOrg': '1',
    'amdfa': 'done',
    'qantas_isDevice': 'type#desktop|os#Mac OS X',
    'TLTUID': 'BFD682A627071D040B4158916050DFC4',
    '_wt.user-676736': 'WT3A4qemZnoyp-gG1AO9NZ3H2nkGhYAtwbzt3OoYB7V52DYsxN-ueVZ3uYgj37AC5K-GbvskSCfY0pUbtGh6Jozh99LU7RBGJOkt-bWJQ~~',
}

headers = {
    'Host': 'book.qantas.com.au',
    'accept': 'text/html,application/xhtml xml,application/xml;q=0.9,*/*;q=0.8',
    'content-type': 'application/x-www-form-urlencoded',
    'origin': 'https://www.qantas.com',
    'accept-language': 'en-us',
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/604.4.7 (KHTML, like Gecko) Version/11.0.2 Safari/604.4.7',
    'referer': 'https://www.qantas.com/tripflowapp/awardBooking.tripflow',
}

params = (
    ('adobe_mc', 'MCMID=39002923232474085011784935677790861354|MCORGID=11B20CF953F3626B0A490D44@AdobeOrg|TS=1531861446'),
    ('quc', 'locale'),
)

data = 'WDS_DISABLE_XBAG_RTA=FALSE&TRIP_TYPE=O&BOOKING_ENTRY_POINT=CLASSIC BOOKING&COMMERCIAL_FARE_FAMILY_1_1=AWARDECO&WDS_DISABLE_SEAT_RTA=FALSE&PREF_AIR_FREQ_MILES_1_1=0&WDS_DISABLED_CARD_CVV=FALSE&SO_SITE_IS_INSURANCE_ENABLED=FALSE&TRAVELLER_TYPE_1=ADT&SO_SITE_ALLOW_FF_NAMING=TRUE&B_LOCATION_1=PVG&SO_SITE_MIN_AVAIL_DATE_SPAN=D2&SO_SITE_MOD_PICK_CITY=TRUE&DIRECT_LOGIN=YES&BOOKING_FLOW=AWARD&DISPLAY_TYPE=1&WDS_SPLIT_PAYMENT_ACTIVATION=FALSE&WDS_DISABLED_CARD_RTA=FALSE&PREF_AIR_FREQ_LEVEL_1_1=FFBR&USER_ID=4007C60CF&PREF_AIR_FREQ_AIRLINE_1_1=QF&WDS_DISABLE_ALL_INCLUSIVE=TRUE&WDS_ASIAN_REGION=TRUE&TYPE_1=ADT&MODIFY_SEARCH_URL=https://www.qantas.com/travel/airlines/flight-search/global/en?showMod=0&FIRST_NAME_1=haoran&LANGUAGE=GB&LAST_NAME_1=wen&PREF_AIR_FREQ_NUMBER_1_1=1938908959&COMMERCIAL_FARE_FAMILY_TYPE_2=U&WDS_USE_OLD_MINIRULES=TRUE&COMMERCIAL_FARE_FAMILY_TYPE_1=C&SITE=QFQFQFFA&PRICING_TYPE=C&EMBEDDED_TRANSACTION=FlexPricerAvailabilityServlet&WDS_DISABLE_C2C_AMOP=FALSE&PASSWORD_2=AWARD&WDS_FORCE_AMOP_DEACTIVATION_LIST=ALIPAY&ENCT=1&PASSWORD_1=AWARD&TITLE_1=MR&PAGE_FROM=/bookingError/v1/redirect/us/en/book-a-trip/flights.html&B_DATE_1=201808020000&ARRANGE_BY=RN&SO_SITE_OFFICE_ID=SHAQF08RR&SKIN=P&E_LOCATION_1=SFO&SO_SITE_MOD_DELIVERY=FALSE&SO_SITE_FP_POJO_ACTIVE=1&CONTACT_POINT_MOBILE=412000000&ENC=69F8FEB7F8A986B4A474A4EBCFA7C2F9B174800A6DF63EBBF35D8E1B0F6E136B838D33FC787D8D8C99CCF8CAE1A17902497F55EBDD2B04808D5DD43DEE6248B130BA6B4731F63768C495B73C65E3F57B1D6BAF4096C42B04C2EADD5DAB2FCFC21BF908ED88D1DCABE7D08FC2E8FF841F3D44F7462BC1A08904516B3358C824E3390BC8204D72268A0D7D9FCB5C4AEE63A0BC16B4F5BE7F7C236DDFF101096E6033F7FF0947A6172516962521B05DF9716E02C829C65D29F843D52177C1FF74CCA1AAF52C0788BB002A90ADD5ACB58EAAE6E1107475927D0712A835A5AC96B4F5E4C6288C683E5A1D4407D440E73E8FF77C2FCDBC64771E2995F7D8F49CBF798E49266B02CA11DE8AB71423163BDC2D300B398FACACC36AA3BF69E5828A2E4D6DEABFDF8341E12CC652E67FB5FEB7915E1E4115086653E30C18E26821C61EA1B76CFF56C8D199D994C407D4F71C47F50E7AD329652B635731BEC2383EA9A39967F5CFDF56792B127CDD4468D4FCDFF3784B67A8C863BD68D4D3175B0E6B1C408F0657C264C4DFCE1878EC5BE6705547FDE580B51F12BFC554F49E47C6869D67C2&WDS_DISABLE_XBAG_CVV=TRUE&CONTACT_POINT_EMAIL_1=harrywenhr@gmail.com&WDS_ACTIVATE_SHOPPING_BASKET=TRUE&PREF_AIR_FREQ_PIN_1_1=6666&WDS_ACTIVATE_POINTS_CAR=TRUE&WDS_DISABLE_SEAT_CVV=FALSE&COMMERCIAL_FARE_FAMILY_2_1=AWARDALL&WDS_DISABLE_NPS=TRUE'

response = requests.post('https://book.qantas.com.au/pl/QFAward/wds/OverrideServlet#en%7CtvlDates#201808020000%7Ccountry#US%7Ctvldate#20180802%7Cregion#AM%7Cdep#PVG%7Carr#SFO&alt_cam_param=&QF_Value=094138235183230130140180093240048011073247104215', headers=headers, params=params, cookies=cookies, data=data)

#NB. Original query string below. It seems impossible to parse and
#reproduce query strings 100% accurately so the one below is given
#in case the reproduced version is not "correct".
# response = requests.post('https://book.qantas.com.au/pl/QFAward/wds/OverrideServlet?adobe_mc=MCMID=39002923232474085011784935677790861354|MCORGID=11B20CF953F3626B0A490D44%40AdobeOrg|TS=1531861446&quc=locale#en|tvlDates#201808020000|country#US|tvldate#20180802|region#AM|dep#PVG|arr#SFO&alt_cam_param=&QF_Value=094138235183230130140180093240048011073247104215', headers=headers, cookies=cookies, data=data)
