import requests

cookies = {
    'JSESSION_QFAward': 'j6ZlM5ejoNbfHM5-2ZdQFYlgB1VUi9jvdqO4uKAyRRi5k05NqLig!1426376354!-1682090555',
    'qantas_isDevice': 'type#desktop|os#Mac OS X',
    'AAMC_qantas_0': 'REGION|9',
    'aam_uuid': '34975727428711392104040217255217006177',
    '_sdsat_uuid': '34975727428711392104040217255217006177',
    'LPVID': 'ZiNDU1ZjE1MjgxOTk3ODY3',
    'JSESSION_QFBOOKING': 'lrhlMRR9hoSh2sccryIsHx_PBqmo007DcX6BvUeuT5c3Bei7bAdl!-731681397!2037630445',
    'bm_mi': '83578BE62BCC39146372220394134151~BFGeO2GO66fpimUfJk G7ZKRb18ilOAJZXU6B5G8jdzcjBl2piWZKz7cYEDWyjQmNjHeZD SzB9rvFaHV76P7OeJG5rCVmzpqa0vsQKPIl8UjqkF4ivJriZ5E7NkACOLpDIDSUgoaeLGRMAc2ibOZt8wbayv0QSq6ztAiOPsLrLku3yc ewBvaRpyZXOjRub9pECEuJVb 5evl1v8C8ZOi3KDKBGsqDi4qT0INgHBtEYGKrdzW4cdr9JFWL9NOovRBRwCvHK4N7OKzopIxfGeEHEytWaIgdOD/AzuyXzCQZx/obT9hIJ7ZwreegUNomf',
    'check': 'true',
    'AMCVS_11B20CF953F3626B0A490D44@AdobeOrg': '1',
    'AMCV_11B20CF953F3626B0A490D44@AdobeOrg': '-330454231|MCMID|35178092656475704434055956778669640672|MCIDTS|17766|MCAAMLH-1535606006|9|MCAAMB-1535606006|j8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI|MCCIDH|-1015965833|MCOPTOUT-1535008406s|NONE|MCSYNCSOP|411-17773|vVersion|3.1.2',
    'usercontext': 'locale#en|tvlDates#201809220000|country#US|tvldate#20180922|region#AM|dep#TLV|arr#HKG',
    'QF_VALUE': '094138235183230130140180093240048011073247104215',
    'mbox': 'session#000abfd77bb24b2e88ceb0768ed0f180#1535003067',
    'timetoBook': 'Wed Aug 22 2018 22:13:26 GMT-0700 (Pacific Daylight Time)',
    's_sess': 's_cc=true',
    'amdfa': 'done',
    'ak_bmsc': '5F6897767D196ABC01A9E8ED8622BE06B81BC785EC050000D0417E5B55849E0C~pleVe49wH/c0ghDQSTkvaIqebQKuv279KqP9TG VKwrmMhsGsl5AhdLQRCnm0oIPVvL/QtuuacD94XH8/Eevp/TgB7xgVY/V9y7vMeNcEWgdSDKhic6nTsghPLCsm7yB/AYZtKqgLUrZlE ZBY8XKc8pRjeJLGMxVX2BHHOHVyzLvb/NpMGc3saItHFua6w5Po2ql gBTLABsJ/wvgEil2HHwFrwcieoZPyblmurdtgm9BRwfC7k0pXI6y7sKQ0orX',
    'LPSID-71115517': 'QIYDLYEyQFOp4f8MkMOi5w',
    'bm_sv': 'D7212C1E2A7455CB43D61D7A904E7C78~pDNdMxyYKutB6U1YE0SFbjvQX2qgdnNv5GGGIN4IsEwJsovliOUB3JtkZRApgsU74PrULDFh5Q7je4SPEykWH1C3adOuurLp36UiJtsp7ad0g2tqGeT1n1ce19KDu/4GBgGMLj5B9BmfRMSMlCKNUmemAzDeNVKKdBz2vMy3z4U=',
    'DWM_XSITECODE': 'QFQFQFBD',
}

headers = {
    'Host': 'book.qantas.com.au',
    'cache-control': 'max-age=0',
    'origin': 'https://www.qantas.com',
    'upgrade-insecure-requests': '1',
    'content-type': 'application/x-www-form-urlencoded',
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36',
    'accept': 'text/html,application/xhtml xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
    'referer': 'https://www.qantas.com/tripflowapp/awardBooking.tripflow',
    'accept-language': 'en-US,en;q=0.9',
}

params = (
    ('adobe_mc', 'MCMID=35178092656475704434055956778669640672|MCORGID=11B20CF953F3626B0A490D44@AdobeOrg|TS=1535001225'),
    ('quc', 'locale'),
)

data = 'WDS_DISABLE_XBAG_RTA=FALSE&TRIP_TYPE=O&BOOKING_ENTRY_POINT=CLASSIC BOOKING&COMMERCIAL_FARE_FAMILY_1_1=AWARDECO&WDS_DISABLE_SEAT_RTA=FALSE&PREF_AIR_FREQ_MILES_1_1=0&SO_SITE_IS_INSURANCE_ENABLED=FALSE&SO_SITE_POINT_OF_SALE=LON&TRAVELLER_TYPE_1=ADT&SO_SITE_ALLOW_FF_NAMING=TRUE&B_LOCATION_1=TLV&SO_SITE_MIN_AVAIL_DATE_SPAN=D1&DIRECT_LOGIN=YES&BOOKING_FLOW=AWARD&DISPLAY_TYPE=1&WDS_SPLIT_PAYMENT_ACTIVATION=TRUE&PREF_AIR_FREQ_LEVEL_1_1=FFBR&USER_ID=4007C60CF&PREF_AIR_FREQ_AIRLINE_1_1=QF&WDS_DISABLE_ALL_INCLUSIVE=TRUE&TYPE_1=ADT&MODIFY_SEARCH_URL=https://www.qantas.com/travel/airlines/flight-search/global/en?showMod=0&FIRST_NAME_1=haoran&LANGUAGE=GB&LAST_NAME_1=wen&PREF_AIR_FREQ_NUMBER_1_1=1938908959&COMMERCIAL_FARE_FAMILY_TYPE_2=U&WDS_USE_OLD_MINIRULES=TRUE&COMMERCIAL_FARE_FAMILY_TYPE_1=C&SITE=QFQFQFFA&PRICING_TYPE=C&WDS_DISABLE_C2C_AMOP=FALSE&EMBEDDED_TRANSACTION=FlexPricerAvailabilityServlet&PASSWORD_2=AWARD&ENCT=1&PASSWORD_1=AWARD&TITLE_1=MR&PAGE_FROM=/bookingError/v1/redirect/us/en/book-a-trip/flights.html&B_DATE_1=201809220000&ARRANGE_BY=RN&SO_SITE_OFFICE_ID=LONQF08RR&SKIN=P&E_LOCATION_1=HKG&SO_SITE_POINT_OF_TICKETING=LON&SO_SITE_FP_POJO_ACTIVE=1&CONTACT_POINT_MOBILE=412000000&ENC=69F8FEB7F8A986B4A474A4EBCFA7C2F9B174800A6DF63EBBF35D8E1B0F6E136B838D33FC787D8D8C99CCF8CAE1A17902497F55EBDD2B04808D5DD43DEE6248B130BA6B4731F63768C495B73C65E3F57B1D6BAF4096C42B04C2EADD5DAB2FCFC21BF908ED88D1DCABE7D08FC2E8FF841F3D44F7462BC1A08904516B3358C824E3390BC8204D72268A0D7D9FCB5C4AEE63A0BC16B4F5BE7F7C236DDFF101096E6033F7FF0947A6172516962521B05DF9716E02C829C65D29F843D52177C1FF74CCA1AAF52C0788BB002A90ADD5ACB58EAAE6E1107475927D0712A835A5AC96B4F5E4C6288C683E5A1D4407D440E73E8FF77C2FCDBC64771E2995F7D8F49CBF798E49266B02CA11DE8AB71423163BDC2D300B398FACACC36AA3BF69E5828A2E4D6DEABFDF8341E12CC652E67FB5FEB7915E1E4115086653E30C18E26821C61EA1B76CFF56C8D199D994C407D4F71C47F50E7AD329652B635731BEC2383EA9A39967F5CFDF56792B127CDD4468D4FCDFF3784B67A8C863BD68D4D3175B0E6B1C408FAC5359EE8DFEA47D0C3A07206935E05DB105D00CEABC5692A5A8CE033DCA0EC1&WDS_DISABLE_XBAG_CVV=TRUE&CONTACT_POINT_EMAIL_1=harrywenhr@gmail.com&WDS_ACTIVATE_SHOPPING_BASKET=TRUE&PREF_AIR_FREQ_PIN_1_1=6666&WDS_ACTIVATE_POINTS_CAR=TRUE&WDS_DISABLE_SEAT_CVV=FALSE&COMMERCIAL_FARE_FAMILY_2_1=AWARDALL&WDS_DISABLE_NPS=TRUE'

response = requests.post('https://book.qantas.com.au/pl/QFAward/wds/OverrideServlet#en%7CtvlDates#201809220000%7Ccountry#US%7Ctvldate#20180922%7Cregion#AM%7Cdep#TLV%7Carr#HKG&alt_cam_param=&QF_Value=094138235183230130140180093240048011073247104215', headers=headers, params=params, cookies=cookies, data=data)

#NB. Original query string below. It seems impossible to parse and
#reproduce query strings 100% accurately so the one below is given
#in case the reproduced version is not "correct".
# response = requests.post('https://book.qantas.com.au/pl/QFAward/wds/OverrideServlet?adobe_mc=MCMID=35178092656475704434055956778669640672|MCORGID=11B20CF953F3626B0A490D44%40AdobeOrg|TS=1535001225&quc=locale#en|tvlDates#201809220000|country#US|tvldate#20180922|region#AM|dep#TLV|arr#HKG&alt_cam_param=&QF_Value=094138235183230130140180093240048011073247104215', headers=headers, cookies=cookies, data=data)
